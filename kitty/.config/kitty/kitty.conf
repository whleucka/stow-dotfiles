# ── Kitty Terminal Config ────────────────────────────────────────────────────
include theme.conf

# Font settings
font_family      family='CaskaydiaMono Nerd Font' postscript_name=CaskaydiaMonoNF-Regular
bold_font        family='CaskaydiaMono Nerd Font' postscript_name=CaskaydiaMonoNF-SemiBold
italic_font      family='CaskaydiaMono Nerd Font' postscript_name=CaskaydiaMonoNF-Italic
bold_italic_font family='CaskaydiaMono Nerd Font' postscript_name=CaskaydiaMonoNF-SemiBoldItalic
font_size        12.0

# Cursor
cursor_shape     block
cursor_blink_interval 0

# Scrollback
scrollback_lines 10000

# Window settings
window_padding_width 0
window_margin_width 0
confirm_os_window_close 0
background_opacity 0.8

# Tab bar (sleek, minimal, glowing active tab)
tab_bar_edge hidden
tab_bar_min_tabs 2
tab_bar_style fade
tab_bar_filter session:~ or session:^$
tab_title_template         {session_name} {title}{' :{}:'.format(num_windows) if num_windows > 1 else ''}
active_tab_font_style   bold
inactive_tab_font_style normal

# Copy/paste
clipboard_control write-clipboard write-primary

# Mouse
mouse_hide_wait 3.0

# Keyboard shortcuts
map kitty_mod+r reload_config
map kitty_mod+c edit_config_file
map kitty_mod+w close_window
map kitty_mod+d detach_window

# Scrollback
scrollback_pager nvim --cmd 'set eventignore=FileType' +'nnoremap q ZQ' +'call nvim_open_term(0, {})' +'set nomodified nolist' +'$' -
map kitty_mod+b launch --type=overlay --stdin-source=@screen_scrollback nvim -u NONE -i NONE -M -c 'normal G' -c 'colorscheme vim' -c 'map q :q!<CR>' -c 'set clipboard=unnamedplus laststatus=0 nospell syntax=' -

# Tabs
map kitty_mod+t     new_tab
map kitty_mod+]     next_tab
map kitty_mod+[     previous_tab
map kitty_mod+enter launch --cwd=current --location=split

# Windows
map ctrl+;         goto_layout tall
map ctrl+'         goto_layout fat:bias=20
map ctrl+.          layout_action bias 80
map kitty_mod+-     launch --location=hsplit
map kitty_mod+\     launch --location=vsplit

# Sessions
map ctrl+s>1        goto_session $HOME/.config/kitty/sessions/home
map ctrl+s>2        goto_session $HOME/.config/kitty/sessions/dotfiles
map ctrl+s>3        goto_session $HOME/.config/kitty/sessions/projects
map ctrl+s>/        goto_session
map ctrl+s>p        goto_session -1
map ctrl+s>s        save_as_session --save-only --relocatable --use-foreground-process --base-dir $HOME/.config/kitty/sessions --match=session:. .

# Splits
map ctrl+j neighboring_window down
map ctrl+k neighboring_window up
map ctrl+h neighboring_window left
map ctrl+l neighboring_window right

# Unset the mapping to pass the keys to neovim
map --when-focus-on var:IS_NVIM ctrl+j
map --when-focus-on var:IS_NVIM ctrl+k
map --when-focus-on var:IS_NVIM ctrl+h
map --when-focus-on var:IS_NVIM ctrl+l

# the 3 here is the resize amount, adjust as needed
map alt+j kitten relative_resize.py down  3
map alt+k kitten relative_resize.py up    3
map alt+h kitten relative_resize.py left  3
map alt+l kitten relative_resize.py right 3

map --when-focus-on var:IS_NVIM alt+j
map --when-focus-on var:IS_NVIM alt+k
map --when-focus-on var:IS_NVIM alt+h
map --when-focus-on var:IS_NVIM alt+l

# Animated cursor
cursor_trail 3
cursor_trail_decay 0.1 0.4

# Performance
repaint_delay       7
input_delay         0
sync_to_monitor     yes

# Ligatures and emoji
symbol_map U+1F000-U+1FAFF emoji

# Bell
enable_audio_bell no
visual_bell_duration 0.2
visual_bell_color #f38ba8

# Misc
detect_urls yes
allow_remote_control yes
shell_integration   enabled
listen_on unix:/tmp/mykitty
